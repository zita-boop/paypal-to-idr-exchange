<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PayRupiah - Tukar PayPal ke IDR</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<!-- PAYPAL LOADING -->
<div id="paypal-loading">
  <div class="pp-loader">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
  <p>Memproses dengan PayPal...</p>
</div>
  
<div class="container">

<!-- Logo di atas -->
<div class="logo">
  <img src="logo-payrupiah.png" alt="PayRupiah Logo">
</div>
  <!-- Keterangan / Judul -->
<div class="logo-title">
  <h2>Penukaran Saldo PayPal ke Rupiah</h2>
  <p>Konversi saldo PayPal Anda secara aman dan cepat ke mata uang Rupiah. Fee otomatis sesuai nominal transaksi.</p>
</div>
   <!-- Menu horizontal -->
  <nav class="menu">
    <a href="alamat.html">Alamat</a>
    <a href="kontak.html">Kontak</a>
  <a href="syarat-ketentuan.html">S&K</a>
    <a href="info.html">Info Nominal</a>
  </nav>

  <!-- Card kalkulator -->
  <div class="card">

    <div class="form-group">
      <label>Nominal USD:</label>
      <input type="number" id="usd" placeholder="Masukkan nominal USD">
    </div>

    <div class="form-group">
      <label>Fee USD:</label>
      <input type="text" id="fee" disabled>
    </div>
  <!-- Info Kurs -->
  <p class="kurs-info">Kurs saat ini: <span id="kurs-usd">16,500</span> IDR / USD</p>
    </div>
    <div class="form-group">
      <label>Total Rupiah:</label>
      <input type="text" id="idr" disabled>
      <small id="note" class="note-text">Sudah dipotong fee</small>
      <small id="warning" class="warning-text">Minimal transaksi $5</small>
    </div>

    <button id="waBtn" disabled>Konfirmasi via WhatsApp</button>
  <button id="lanjut" style="display:none;" onclick="location.href='confirm.html'">
  Saya Sudah Kirim Bukti
</button>
  </div>

</div>

<script src="script.js"></script>

<script>
function kirimWA(){
  const usd = document.getElementById("usd").value;

  if(!usd || usd < 5){
    alert("Minimal penukaran 5 USD");
    return;
  }

  const rate = 16500;

  function fee(u){
    if (u < 10) return 0.7;
    if (u < 50) return 1;
    if (u < 100) return 1.7;
    if (u < 150) return 2;
    if (u < 200) return 2.5;
    return 3;
  }

  const f = fee(usd);
  const net = (usd - f).toFixed(2);
  const rupiah = Math.round(net * rate);
  const trx = "PR-" + Date.now();

  // SIMPAN DATA
  localStorage.setItem("trx", trx);
  localStorage.setItem("usd", usd);
  localStorage.setItem("fee", f);
  localStorage.setItem("net", net);
  localStorage.setItem("idr", rupiah);

  const text =
`Halo Admin PayRupiah
ID Transaksi: ${trx}

Nominal USD : $${usd}
Fee         : $${f}
USD Diterima: $${net}
Rupiah      : Rp ${rupiah.toLocaleString("id-ID")}

Saya kirim bukti transfer Rupiah.`;

  const wa = "https://wa.me/6281119566667?text=" + encodeURIComponent(text);

  window.open(wa, "_blank");
  window.location.href = "confirm.html";
}
</script>
<script>
  window.addEventListener("load", function () {
    setTimeout(function () {
      const loader = document.getElementById("paypal-loading");
      if (loader) {
        loader.style.display = "none";
      }
    }, 1200); // durasi loading
  });
  </script>
</body>
  </html>
